<div class="stats-grid">
    <div class="stat-row">
        <div class="stat-block">
            <div class="stat-label">Masters Average</div>
            <div class="stat-value">
                <button class="calc-toggle inline" (click)="showCalc = !showCalc" title="See average calculation">
                    <fa-icon [icon]="showCalc ? faEyeSlash : faEye"></fa-icon>
                </button>
                {{stats.playingAverage}}
            </div>
        </div>
        <div class="stat-block">
            <div class="stat-label">Career Average</div>
            <div class="stat-value">{{stats.careerAverage}}</div>
        </div>
    </div>
    <div class="stat-row">
        <div class="stat-block">
            <div class="stat-label">Wins/Stars</div>
            <div class="stat-value">{{stats.wins}}</div>
        </div>
        <div class="stat-block">
            <div class="stat-label">Career Total</div>
            <div class="stat-value">{{stats.totalPinfall | number}}</div>
        </div>
    </div>
    <div class="stat-row">
        <div class="stat-block">
            <div class="stat-label">High Game</div>
            <div class="stat-value">{{stats.highGame}}</div>
        </div>
        <div class="stat-block">
            <div class="stat-label">Career Tournaments</div>
            <div class="stat-value">{{stats.tournaments}}</div>
        </div>
    </div>
    <div class="stat-row">
        <div class="stat-block">
            <div class="stat-label">High Set</div>
            <div class="stat-value">{{stats.highSet}}</div>
        </div>
        <div class="stat-block">
            <div class="stat-label">Career Games</div>
            <div class="stat-value">{{stats.games | number}}</div>
        </div>
    </div>
</div>
<div class="note">* since 2005</div>

<div class="calc-panel" *ngIf="showCalc">
    <div class="calc-row">
        <div class="calc-label">Events used</div>
        <div class="calc-value">{{masterCalc.tournamentsCount}} / 10</div>
    </div>
    <div class="calc-row">
        <div class="calc-label">Games used</div>
        <div class="calc-value">{{masterCalc.gamesCount}}</div>
    </div>
    <div class="calc-row">
        <div class="calc-label">Pinfall sum</div>
        <div class="calc-value">{{masterCalc.pinfall}}</div>
    </div>

    <div class="calc-row" *ngIf="masterCalc.missingEvents > 0">
        <div class="calc-label">Missing events</div>
        <div class="calc-value">{{masterCalc.missingEvents}}</div>
    </div>
    <div class="calc-row" *ngIf="masterCalc.missingEvents > 0">
        <div class="calc-label">League average</div>
        <div class="calc-value">
            <input
                type="number"
                min="0"
                step="1"
                [(ngModel)]="leagueAverageInput"
                (ngModelChange)="onLeagueAverageChange()"
                placeholder="Enter avg"
            />
            <span class="calc-hint">pads {{masterCalc.missingEvents * 8}} games</span>
        </div>
    </div>
    <div class="calc-row" *ngIf="masterCalc.missingEvents > 0">
        <div class="calc-label">Padded pinfall</div>
        <div class="calc-value">{{masterCalc.paddedPinfall}}</div>
    </div>
    <div class="calc-row" *ngIf="masterCalc.missingEvents > 0">
        <div class="calc-label">Combined games</div>
        <div class="calc-value">{{masterCalc.combinedGames}}</div>
    </div>
    <div class="calc-row">
        <div class="calc-label">Calculated average</div>
        <div class="calc-value">{{masterCalc.combinedAverage ?? 'â€”'}}</div>
    </div>
</div>
