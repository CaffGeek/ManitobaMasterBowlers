<div class="media-page">
  <h1>Media Upload</h1>
  <p class="media-help">
    Upload a file and copy the URL into a content block.
  </p>

  <div class="media-layout">
    <aside class="media-sidebar">
      <div class="media-search">
        <input
          type="text"
          placeholder="Search files..."
          [(ngModel)]="filterText"
          (input)="applyFilter()"
        />
      </div>

      <div class="media-list">
        <div class="media-item" *ngFor="let item of filteredItems">
          <a href="" (click)="$event.preventDefault(); selectItem(item)">
            {{ item.name }}
          </a>
          <app-action-icon-button
            [icon]="faTrash"
            variant="delete"
            ariaLabel="Delete media"
            (action)="confirmDelete(item)"
          ></app-action-icon-button>
        </div>
      </div>
    </aside>

    <section class="media-main">
      <div class="media-form">
        <input type="file" (change)="onFileSelected($event)" />
        <button class="btn btn-success" (click)="upload()" [disabled]="!selectedFile || isUploading">
          {{ isUploading ? 'Uploading...' : 'Upload' }}
        </button>
      </div>

      <div class="media-preview" *ngIf="previewUrl || selectedItemUrl">
        <h3>Preview</h3>
        <img [src]="previewUrl || selectedItemUrl" alt="Selected media preview" />
      </div>

      <div class="media-result" *ngIf="uploadedUrl">
        <h3>Uploaded URL</h3>
        <div class="media-url">
          <input type="text" [value]="uploadedUrl" readonly />
          <button class="btn btn-outline-secondary" (click)="copyUrl()">Copy</button>
        </div>
        <p class="media-note">Paste this URL into your content block.</p>
      </div>
    </section>
  </div>

  <div class="media-error" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>
</div>
